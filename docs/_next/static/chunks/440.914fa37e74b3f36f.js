"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{6440:function(t,e,r){r.r(e),r.d(e,{default:function(){return v}});var n=r(7437),i=r(2265),o=r(8811),a=r.n(o),s=r(6375);function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n.key),n)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],h=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;h=!1}else for(;!(h=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);h=!0);}catch(t){u=!0,i=t}finally{try{if(!h&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(t,e)||d(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var p="undefined"!=typeof window&&window.THREE?window.THREE:{LinearFilter:s.wem,Sprite:s.jyi,SpriteMaterial:s.xeV,SRGBColorSpace:s.KI_,Texture:s.xEZ},b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(o,t);var e,r,n,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=u(o);if(e){var n=u(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(255, 255, 255, 1)";return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,new p.SpriteMaterial))._text="".concat(e),t._textHeight=r,t._color=n,t._backgroundColor=!1,t._padding=0,t._borderWidth=0,t._borderRadius=0,t._borderColor="white",t._strokeWidth=0,t._strokeColor="white",t._fontFace="system-ui",t._fontSize=90,t._fontWeight="normal",t._canvas=document.createElement("canvas"),t._genCanvas(),t}return r=[{key:"text",get:function(){return this._text},set:function(t){this._text=t,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(t){this._textHeight=t,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding=t,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(t){this._borderWidth=t,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(t){this._borderRadius=t,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(t){this._borderColor=t,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(t){this._fontFace=t,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize=t,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight=t,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(t){this._strokeColor=t,this._genCanvas()}},{key:"_genCanvas",value:function(){var t=this,e=this._canvas,r=e.getContext("2d"),n=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],i=n.map(function(e){return e*t.fontSize*.1}),o=(Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius]).map(function(e){return e*t.fontSize*.1}),a=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],s=a.map(function(e){return e*t.fontSize*.1}),h=this.text.split("\n"),u="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace);r.font=u;var c=Math.max.apply(Math,f(h.map(function(t){return r.measureText(t).width}))),d=this.fontSize*h.length;if(e.width=c+2*i[0]+2*s[0],e.height=d+2*i[1]+2*s[1],this.borderWidth){if(r.strokeStyle=this.borderColor,i[0]){var g=i[0]/2;r.lineWidth=i[0],r.beginPath(),r.moveTo(g,o[0]),r.lineTo(g,e.height-o[3]),r.moveTo(e.width-g,o[1]),r.lineTo(e.width-g,e.height-o[2]),r.stroke()}if(i[1]){var b=i[1]/2;r.lineWidth=i[1],r.beginPath(),r.moveTo(Math.max(i[0],o[0]),b),r.lineTo(e.width-Math.max(i[0],o[1]),b),r.moveTo(Math.max(i[0],o[3]),e.height-b),r.lineTo(e.width-Math.max(i[0],o[2]),e.height-b),r.stroke()}if(this.borderRadius){var y=Math.max.apply(Math,f(i)),v=y/2;r.lineWidth=y,r.beginPath(),[!!o[0]&&[o[0],v,v,o[0]],!!o[1]&&[e.width-o[1],e.width-v,v,o[1]],!!o[2]&&[e.width-o[2],e.width-v,e.height-v,e.height-o[2]],!!o[3]&&[o[3],v,e.height-v,e.height-o[3]]].filter(function(t){return t}).forEach(function(t){var e=l(t,4),n=e[0],i=e[1],o=e[2],a=e[3];r.moveTo(n,o),r.quadraticCurveTo(i,o,i,a)}),r.stroke()}}this.backgroundColor&&(r.fillStyle=this.backgroundColor,this.borderRadius?(r.beginPath(),r.moveTo(i[0],o[0]),[[i[0],o[0],e.width-o[1],i[1],i[1],i[1]],[e.width-i[0],e.width-i[0],e.width-i[0],i[1],o[1],e.height-o[2]],[e.width-i[0],e.width-o[2],o[3],e.height-i[1],e.height-i[1],e.height-i[1]],[i[0],i[0],i[0],e.height-i[1],e.height-o[3],o[0]]].forEach(function(t){var e=l(t,6),n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],h=e[5];r.quadraticCurveTo(n,a,i,s),r.lineTo(o,h)}),r.closePath(),r.fill()):r.fillRect(i[0],i[1],e.width-2*i[0],e.height-2*i[1])),r.translate.apply(r,f(i)),r.translate.apply(r,f(s)),r.font=u,r.fillStyle=this.color,r.textBaseline="bottom";var _=this.strokeWidth>0;_&&(r.lineWidth=this.strokeWidth*this.fontSize/10,r.strokeStyle=this.strokeColor),h.forEach(function(e,n){var i=(c-r.measureText(e).width)/2,o=(n+1)*t.fontSize;_&&r.strokeText(e,i,o),r.fillText(e,i,o)}),this.material.map&&this.material.map.dispose();var m=this.material.map=new p.Texture(e);m.minFilter=p.LinearFilter,m.colorSpace=p.SRGBColorSpace,m.needsUpdate=!0;var k=this.textHeight*h.length+2*n[1]+2*a[1];this.scale.set(k*e.width/e.height,k,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(t){return p.Sprite.prototype.copy.call(this,t),this.color=t.color,this.backgroundColor=t.backgroundColor,this.padding=t.padding,this.borderWidth=t.borderWidth,this.borderColor=t.borderColor,this.fontFace=t.fontFace,this.fontSize=t.fontSize,this.fontWeight=t.fontWeight,this.strokeWidth=t.strokeWidth,this.strokeColor=t.strokeColor,this}}],h(o.prototype,r),n&&h(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(p.Sprite);let y=a()(()=>r.e(667).then(r.bind(r,9667)),{loadableGenerated:{webpack:()=>[9667]},ssr:!1});function v(){let[t,e]=(0,i.useState)({nodes:[],links:[]});if((0,i.useEffect)(()=>{fetch("/books.json").then(t=>t.json()).then(e).catch(t=>console.error("Failed to load books data",t))},[]),!t.nodes.length)return(0,n.jsx)("div",{children:"Loading..."});let r={nodes:[],links:[]};for(let[e,n]of(r.links=[...t.links],r.nodes=[...t.nodes],Object.entries(Object.groupBy(t.nodes,t=>{let{group:e}=t;return e})))){let t=[...new Set(n.map(t=>t.id))];for(let e=0;e<t.length;e++)for(let n=1;n<t.length;n++)r.links.push({source:t[e],target:t[n]})}return(0,n.jsx)(y,{graphData:r,nodeAutoColorBy:"group",nodeThreeObject:t=>{let e=new b(t.id);return e.color=t.color,e.textHeight=8,e}})}}}]);